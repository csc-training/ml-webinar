ssh puhti
cd etc
make uninstall
rm -rf ~/.local/lib/python3.*
cd examples
rm -rf slurm*out logs *.h5
cp ~/tmp/run.sh .
Ctrl-D
ssh puhti

# After slide 11
module list
which python3
python3
>>> import tensorflow

module avail
module load tensorflow/2.0.0

which python3
python3
>>> import tensorflow
>>> tensorflow.__version__
>>> import imageio
Ctrl-D

pip install --user imageio
ls .local/lib/python3.7/site-packages/

python3
>>> import imageio
>>> imageio.__version__
>>> imageio.__path__


module list
module avail tensorflow
module load tensorflow/2.2-sng
which python3
singularity_wrapper exec python3
>>> import tensorflow
>>> tensorflow.__version__
>>> import imageio
Ctrl-D

ls .local/lib/
singularity_wrapper exec pip install --user imageio
ls .local/lib/python3.6/site-packages/

singularity_wrapper exec python3
import imageio
imageio.__path__

# Back to slides
# After slide 16

cd examples
cat run.sh
sbatch run.sh
squeue -l -u $USER -p gputest
tail -f slurm*out
Ctrl-C
ls
vim run.sh
# change to 2.2-sng, srun singularity_wrapper exec
sbatch run.sh
squeue -l -u $USER -p gputest
tail -f slurm*out
Ctrl-C

# Back to slides
# After slide 22

vim tf2-dvc-cnn-simple.py
# show DATADIR

ls /scratch/dac/data/dogs-vs-cats.tar
vim run.sh
# add ,nvme:10
#tar xf /scratch/dac/data/dogs-vs-cats.tar -C $LOCAL_SCRATCH
# export DATADIR=$LOCAL_SCRATCH

sbatch run.sh
squeue -l -u $USER -p gputest
tail -f slurm*out

